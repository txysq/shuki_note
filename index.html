<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Shu Ki">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Shu Ki">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shu Ki">






  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Shu Ki</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shu Ki</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-github">

    
    
    
      
    

    

    <a href="https://github.com/txysq" rel="noopener" target="_blank"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>github</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/23/简单爬虫--ajax果壳网 pymongo保存/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shuki">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shu Ki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/23/简单爬虫--ajax果壳网 pymongo保存/" class="post-title-link" itemprop="url">简单爬虫--ajax果壳网 pymongo保存</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-23 13:58:00 / 修改时间：13:37:46" itemprop="dateCreated datePublished" datetime="2019-03-23T13:58:00+08:00">2019-03-23</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/爬虫/" itemprop="url" rel="index"><span itemprop="name">爬虫</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在平时爬取网页的时候，可能都遇到过有些网页直接请求得到的 HTML 代码里面，并没有我们需要的数据，也就是我们在浏览器中看到的内容。<br><br>这就是因为这些信息是通过Ajax加载的，并且通过js渲染生成的。<br><br><br><br><strong>分析网站</strong><br><br>打开“检查” 点击“network”和“xhr”<br><img src="/2019/03/23/简单爬虫--ajax果壳网 pymongo保存/html1.png" alt><br>找到<strong>基本网址</strong>和<strong>请求参数</strong><br><img src="/2019/03/23/简单爬虫--ajax果壳网 pymongo保存/html2.png" alt><br><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">base_url = &apos;https://www.guokr.com/apis/minisite/article.json?&apos; #基本网址</span><br><span class="line"># 单独一个网页请求</span><br><span class="line">import requests</span><br><span class="line">from urllib.parse import urlencode</span><br><span class="line">from requests.exceptions import RequestException</span><br><span class="line"></span><br><span class="line">def get_page_index(offset):</span><br><span class="line">    data = &#123;</span><br><span class="line">        &apos;retrieve_type&apos;: &apos;by_subject&apos;,</span><br><span class="line">        &apos;limit&apos;: &apos;20&apos;,</span><br><span class="line">        &apos;offset&apos;: offset</span><br><span class="line">    &#125;</span><br><span class="line">    try:</span><br><span class="line">        url = base_url+urlencode(data)</span><br><span class="line">        response = requests.get(url)</span><br><span class="line">        if response.status_code == 200:</span><br><span class="line">            return response.text</span><br><span class="line">        return None</span><br><span class="line">    except RequestException:</span><br><span class="line">        print(&apos;请求失败！&apos;)</span><br><span class="line">        return None</span><br><span class="line">```&lt;/br&gt;</span><br><span class="line"></span><br><span class="line">打开 “preview” result下有多个index，每个index中有URL 就是一个新闻网址</span><br><span class="line">![](简单爬虫--ajax果壳网 pymongo保存/html3.png)</span><br><span class="line">&lt;/br&gt;</span><br></pre></td></tr></table></figure></p>
<p>import json</p>
<p>def get_page(url):<br>    try:<br>        resp = requests.get(url)<br>        if resp.status_code == 200:</p>
<pre><code>        # print(resp.text)
        return resp.text
    return None
except ConnectionError:
    print(&apos;Error.&apos;)
    return None
</code></pre><p>def parse_json(text):<br>    try:<br>        result = json.loads(text)<br>        if result:<br>            for i in result.get(‘result’):<br>                print(i.get(‘url’))<br>                yield i.get(‘url’)<br>    except:<br>        pass<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">我们打开网址的源代码 找到我们想要爬取的data</span><br><span class="line">![](简单爬虫--ajax果壳网 pymongo保存/html4.png)</span><br><span class="line">&lt;/br&gt;</span><br></pre></td></tr></table></figure></p>
<p>from bs4 import BeautifulSoup</p>
<p>def parse_page(response,url):<br>    try:<br>        soup = BeautifulSoup(response,’lxml’)<br>        content = soup.find(‘div’, class_ = ‘content’)<br>        title = content.find(‘h1’,id=”articleTitle”).get_text()<br>        author = content.find(‘div’, class_=”content-th-info”).find(‘a’).get_text()<br>        article_content = content.find(‘div’, class_=”document”).find_all(‘p’)<br>        all_p = []<br>        img = []<br>        for i in article_content:<br>            if not i.find(‘img’) and not i.find(‘a’):<br>                all_p.append(i.get_text())<br>            elif  i.find(‘img’):<br>                img.append(i.find(‘img’).get(‘src’))</p>
<pre><code>    #article = &apos;\n&apos;.join(all_p)
    #imgs = &apos;\n&apos;.join(img)
    data = {
        &apos;url&apos;:url,
        &apos;title&apos;: title,
        &apos;author&apos;: author,
        &apos;article&apos;: all_p,
        &apos;images&apos;:img
    }
    return data
except:
    pass
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">链接MongoDB</span><br></pre></td></tr></table></figure>
<p>import pymongo<br>client = pymongo.MongoClient(host=’localhost’, port=27017)<br>db = client[‘guoke_ajax’]</p>
<p>def save_data(data):<br>    collection = db[‘test’]<br>    if collection.insert(data):<br>        print(‘save data successful’)<br>        return True<br>    return False<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">主函数</span><br></pre></td></tr></table></figure></p>
<p>def main(offset):<br>    html = get_page_index(offset)<br>    all_url = parse_json(html)<br>    for url in all_url:<br>        response = get_page(url)<br>        data = parse_page(response,url)<br>        if data:<br>            save_data(data)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多线程和循环</span><br></pre></td></tr></table></figure></p>
<p>from multiprocessing import Pool</p>
<p>if <strong>name</strong> ==”<strong>main</strong>“:<br>    pool =Pool()<br>    offset = [i*20+18 for i in range(500)]<br>    pool.map(main, offset)<br>    pool.close()<br>    pool.join()<br><code>`</code><br><strong>其中，网站会有反扒机制，会图灵测试。</strong><br><img src="/2019/03/23/简单爬虫--ajax果壳网 pymongo保存/html5.png" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/21/客网：剑指Offer-编程题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shuki">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shu Ki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/21/客网：剑指Offer-编程题/" class="post-title-link" itemprop="url">牛客网：剑指Offer_编程题python2.7</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-21 14:15:00 / 修改时间：16:28:44" itemprop="dateCreated datePublished" datetime="2019-03-21T14:15:00+08:00">2019-03-21</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>在一个二维数组中（每个一维数组的长度相同），每一行都按照从左到右递增的顺序排序，每一列都按照从上到下递增的顺序排序。请完成一个函数，输入这样的一个二维数组和一个整数，判断数组中是否含有该整数。</strong><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">class Solution:</span><br><span class="line">    # array 二维列表</span><br><span class="line">    def Find(self, target, array):</span><br><span class="line">        # write code here</span><br><span class="line">        row = len(array)</span><br><span class="line">        col = len(array[0])</span><br><span class="line">        i = 0</span><br><span class="line">        j = col-1</span><br><span class="line">        while i&lt;row and j&gt;(-1):</span><br><span class="line">            if array[i][j] == target:</span><br><span class="line">                return True</span><br><span class="line">            elif array[i][j] &gt; target:</span><br><span class="line">                j = j-1</span><br><span class="line">            else:</span><br><span class="line">                i = i+1</span><br><span class="line">        return False</span><br></pre></td></tr></table></figure></p>
<p><strong>实现一个函数，将一个字符串中的每个空格替换成“%20”。例如，当字符串为We Are Happy.则经过替换之后的字符串为We%20Are%20Happy。</strong><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">class Solution:</span><br><span class="line">    # s 源字符串</span><br><span class="line">    def replaceSpace(self, s):</span><br><span class="line">        # write code here</span><br><span class="line">        l = s.split(&apos; &apos;)</span><br><span class="line">        if len(l) == 1:</span><br><span class="line">            return s</span><br><span class="line">        s = l[0]</span><br><span class="line">        for i in range(1,len(l)):</span><br><span class="line">            s = s+&apos;%20&apos;+l[i]        </span><br><span class="line">        return s</span><br></pre></td></tr></table></figure></p>
<p><strong>输入一个链表，按链表值从尾到头的顺序返回一个ArrayList。</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line"># class ListNode:</span><br><span class="line">#     def __init__(self, x):</span><br><span class="line">#         self.val = x</span><br><span class="line">#         self.next = None</span><br><span class="line"></span><br><span class="line">class Solution:</span><br><span class="line">    # 返回从尾部到头部的列表值序列，例如[1,2,3]</span><br><span class="line">    def printListFromTailToHead(self, listNode):</span><br><span class="line">        # write code here</span><br><span class="line">        l = []</span><br><span class="line">        while listNode:</span><br><span class="line">            l.insert(0, listNode.val)</span><br><span class="line">            listNode = listNode.next</span><br><span class="line">        return l</span><br></pre></td></tr></table></figure></p>
<p><strong>输入某二叉树的前序遍历和中序遍历的结果，请重建出该二叉树。假设输入的前序遍历和中序遍历的结果中都不含重复的数字。例如输入前序遍历序列{1,2,4,7,3,5,6,8}和中序遍历序列{4,7,2,1,5,3,8,6}，则重建二叉树并返回。</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">#树的数据结构</span><br><span class="line"># class TreeNode:</span><br><span class="line">#     def __init__(self, x):</span><br><span class="line">#         self.val = x</span><br><span class="line">#         self.left = None</span><br><span class="line">#         self.right = None</span><br><span class="line">class Solution:</span><br><span class="line">    # 返回构造的TreeNode根节点</span><br><span class="line">    def reConstructBinaryTree(self, pre, tin):</span><br><span class="line">        # write code here</span><br><span class="line">        if len(pre) == 0:</span><br><span class="line">            return None</span><br><span class="line">        if len(pre) == 1:</span><br><span class="line">            return TreeNode(pre[0])</span><br><span class="line">        else:</span><br><span class="line">            res = TreeNode(pre[0])</span><br><span class="line">            res.left =self.reConstructBinaryTree(pre[1:tin.index(pre[0])+1],tin[: tin.index(pre[0])])</span><br><span class="line">            res.right = self.reConstructBinaryTree(pre[tin.index(pre[0]) + 1: ], tin[tin.index(pre[0]) + 1: ])</span><br><span class="line">        return res</span><br></pre></td></tr></table></figure></p>
<p><strong>用两个栈来实现一个队列，完成队列的Push和Pop操作。 队列中的元素为int类型。</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">class Solution:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.stock1 = []</span><br><span class="line">        self.stock2 = []</span><br><span class="line">    def push(self, node):</span><br><span class="line">        self.stock1.append(node)</span><br><span class="line">        # write code here</span><br><span class="line">    def pop(self):</span><br><span class="line">        if self.stock2 == []:</span><br><span class="line">            if  self.stock1 == []:</span><br><span class="line">                return None</span><br><span class="line">            else:</span><br><span class="line">                for i in range(len(self.stock1)):</span><br><span class="line">                    self.stock2.append(self.stock1.pop())</span><br><span class="line">        return self.stock2.pop()</span><br></pre></td></tr></table></figure></p>
<p><strong>把一个数组最开始的若干个元素搬到数组的末尾，我们称之为数组的旋转。 输入一个非减排序的数组的一个旋转，输出旋转数组的最小元素。 例如数组{3,4,5,1,2}为{1,2,3,4,5}的一个旋转，该数组的最小值为1。 NOTE：给出的所有元素都大于0，若数组大小为0，请返回0。</strong><br></p>
<p>方法一：直接遍历，时间复杂度大，没通过。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">class Solution:</span><br><span class="line">    def minNumberInRotateArray(self, rotateArray):</span><br><span class="line">        # write code here</span><br><span class="line">        if len(rotateArray) == 0:</span><br><span class="line">            return 0</span><br><span class="line">        else:</span><br><span class="line">            sum = 0</span><br><span class="line">            for i in range(len(rotateArray)):</span><br><span class="line">                if rotateArray[i] &gt;= rotateArray[i+1]:</span><br><span class="line">                    break</span><br><span class="line">                else:</span><br><span class="line">                    sum = sum+1</span><br><span class="line">            return rotateArray[sum+1]</span><br></pre></td></tr></table></figure></p>
<p>方法二：采用二分查找<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">class Solution:</span><br><span class="line">    def minNumberInRotateArray(self, rotateArray):</span><br><span class="line">        # write code here</span><br><span class="line">        if len(rotateArray) == 0:</span><br><span class="line">            return 0</span><br><span class="line">        else:</span><br><span class="line">            p1 = 0</span><br><span class="line">            p2 = len(rotateArray)-1</span><br><span class="line">            mid = p1</span><br><span class="line">            while rotateArray[p1]&gt;=rotateArray[p2]:</span><br><span class="line">                if p2 - p1 ==1:</span><br><span class="line">                    mid = p2</span><br><span class="line">                    break</span><br><span class="line">                mid =(p1+p2)&gt;&gt;1 #</span><br><span class="line">                if rotateArray[mid]&gt;=rotateArray[p1]:</span><br><span class="line">                    p1 = mid</span><br><span class="line">                elif rotateArray[mid] &lt;= rotateArray[p2]:</span><br><span class="line">                    p2 =mid</span><br><span class="line">            return rotateArray[mid]</span><br></pre></td></tr></table></figure></p>
<p><strong>大家都知道斐波那契数列，现在要求输入一个整数n，请你输出斐波那契数列的第n项（从0开始，第0项为0）。</strong> <br><br>递归，时间复杂度大<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">class Solution:</span><br><span class="line">    def Fibonacci(self, n):</span><br><span class="line">        # write code here</span><br><span class="line">        if n &lt;= 0:</span><br><span class="line">            return 0</span><br><span class="line">        elif n == 1:</span><br><span class="line">            return 1</span><br><span class="line">        else:</span><br><span class="line">            s = self.Fibonacci(n-1)+self.Fibonacci(n-2)</span><br><span class="line">        return s</span><br></pre></td></tr></table></figure></p>
<p>循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">class Solution:</span><br><span class="line">    def Fibonacci(self, n):</span><br><span class="line">        # write code here</span><br><span class="line">        a = 0</span><br><span class="line">        b = 1</span><br><span class="line">        if n &lt;= 0:</span><br><span class="line">            return a</span><br><span class="line">        elif n == 1:</span><br><span class="line">            return b</span><br><span class="line">        else:</span><br><span class="line">            while n &gt; 1:</span><br><span class="line">                a, b = b, a+b</span><br><span class="line">                n = n-1</span><br><span class="line">            return b</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/07/Pytorch中文手册》知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shuki">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shu Ki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/07/Pytorch中文手册》知识/" class="post-title-link" itemprop="url">《Pytorch中文手册》第一章知识</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-07 17:01:00" itemprop="dateCreated datePublished" datetime="2019-03-07T17:01:00+08:00">2019-03-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-12 10:03:15" itemprop="dateModified" datetime="2019-03-12T10:03:15+08:00">2019-03-12</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/深度学习/" itemprop="url" rel="index"><span itemprop="name">深度学习</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>pytorch是NumPy的替代品，可以使用GPU的强大计算能力，作为深度学习的一个研究平台。包含<strong>自动求导</strong>系统的的深度神经网络</p>
<h5 id="Tensors（张量）"><a href="#Tensors（张量）" class="headerlink" title="Tensors（张量）"></a>Tensors（张量）</h5><p><strong>所有的 Tensor 类型默认都是基于CPU</strong></p>
<p>#定义张量<strong>torch.tensor</strong><br><br> <code>import torch
 x = torch.tensor([5.5, 3],[4,3],[5,2])</code><br><br> 根据现有的张量$x$ 创建新的张量<br> <code>y = torch.randn_like(x, dtype=torch.float)</code><br><br> <strong>tensor.size</strong>方法可以打印尺度大小<br> <code>print(x.size())</code><br><br> 使用索引方式来进行对张量的操作<code>print(x[:, 1])</code>返回<code>tensor([3,3,2])</code><br><br> <strong>torch.view</strong>: 可以改变张量的维度和大小  <code>y = x.view(2,3)</code><br></p>
<h6 id="Numpy转换"><a href="#Numpy转换" class="headerlink" title="Numpy转换"></a><strong>Numpy转换</strong></h6><p><code>b = a.numpy()</code> a是tensor, b为numpy<br><br><code>a = torch.from_numpy(b)</code> b为numpy, a是tensor<br></p>
<h6 id="cuda"><a href="#cuda" class="headerlink" title="cuda"></a><strong>cuda</strong></h6><p>直接从GPU创建张量<code>y = torch.ones_like(x, device=torch.device(&quot;cuda&quot;))</code><br><br>使用<strong>.to</strong>方法 可以将Tensor移动到任何设备中<code>x = x.to(torch.device(&quot;cuda&quot;))</code> </p>
<h5 id="Autograd-自动求导机制"><a href="#Autograd-自动求导机制" class="headerlink" title="Autograd: 自动求导机制"></a><strong>Autograd: 自动求导机制</strong></h5><p>torch.Tensor是这个包的核心类。如果设置<strong> .requires_grad</strong>为<strong>True</strong>，那么将会追踪所有对于该张量的操作。 当完成计算后通过调用<strong>.backward()</strong>，自动计算所有的梯度， 这个张量的所有梯度将会自动积累到<strong>.grad</strong>属性。<br><br><code>x = torch.ones(2, 2, requires_grad=True)</code> 会得到grad_fn = AddBackward<br><br>要阻止张量跟踪历史记录，可以调用<strong>.detach()</strong>方法将其与计算历史记录分离，并禁止跟踪它将来的计算记录<code>fake_AB.detach()</code>。可以将代码块包装在<code>with torch.no_grad()：</code>比如<br><code>with torch.no_grad()：
    y = x ** 2 #不会添加到计算图中</code><br></p>
<p>计算导数，你可以在Tensor上调用<strong>.backward()</strong>。 如果Tensor是一个<strong>标量</strong>（即它包含一个元素数据）则不需要为backward()指定任何参数。但是如果它有更多的元素，需要指定一个<strong>gradient</strong>参数来匹配张量的<strong>形状</strong>。<br><br><code>y = torch.tensor([-920.6895, -115.7301, -867.6995])
gradients = torch.tensor([0.1, 0.01, 0.001], dtype=torch.float)
y.backward(gradients)</code></p>
<h5 id="神经网络"><a href="#神经网络" class="headerlink" title="神经网络"></a><strong>神经网络</strong></h5><p><code>import torch 
import torch.nn as nn
import torch.nn.functional as f 
import torch.optim as optim</code><br><br><strong>定义网络</strong><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">class ysq_net(nn.Module):</span><br><span class="line">	#定义卷积和全连接层</span><br><span class="line">    def __init__(self):</span><br><span class="line">        super(ysq_net,self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(in_channels=1,out_channels=6,kernel_size=5)</span><br><span class="line">        self.conv2 = nn.Conv2d(in_channels=6, out_channels=16, kernel_size=5)</span><br><span class="line">        self.fc_1 = nn.Linear(16*5*5,120)</span><br><span class="line">        self.fc_2 = nn.Linear(120,84)</span><br><span class="line">        self.fc_3 = nn.Linear(84,10)</span><br><span class="line">	#定义简单的前馈</span><br><span class="line">    def forward(self,x):</span><br><span class="line">        x1 = f.max_pool2d(f.relu(self.conv1(x)),(2,2))</span><br><span class="line">        x2 = f.max_pool2d(f.relu(self.conv2(x1)),(2,2))</span><br><span class="line">        x3 = x2.view(-1,self.sum_flat_features(x2))</span><br><span class="line">        x4 = f.relu(self.fc_1(x3))</span><br><span class="line">        x5 = f.relu(self.fc_2(x4))</span><br><span class="line">        x6 = self.fc_3(x5)</span><br><span class="line">        return x6</span><br><span class="line">	#特征展开</span><br><span class="line">    def sum_flat_features(self,x):</span><br><span class="line">        size = x.size()[1:]</span><br><span class="line">        num_feature = 1</span><br><span class="line">        for s in size:</span><br><span class="line">            num_feature *= s</span><br><span class="line">        return num_feature</span><br><span class="line">net = ysq_net() #网络实例化</span><br><span class="line">print(net)</span><br><span class="line"></span><br><span class="line">for i in range(10):</span><br><span class="line">   #随机输入，得到输出</span><br><span class="line">    input =torch.randn(1,1,32,32)</span><br><span class="line">    out = net(input)</span><br><span class="line">    print(out)</span><br><span class="line">   #所有参数的梯度缓存清零</span><br><span class="line">    net.zero_grad()</span><br><span class="line">    print(&apos;conv1.bias.grad&apos;)</span><br><span class="line">    print(net.conv1.bias.grad)</span><br><span class="line">    #out.backward(torch.randn(1, 10))</span><br><span class="line">   #定义优化器为随机梯度下降</span><br><span class="line">    optimizer = optim.SGD(net.parameters(), lr=0.01)</span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">	#与真实值MSE损失</span><br><span class="line">    target = torch.randn(10)</span><br><span class="line">    target = target.view(1,-1)</span><br><span class="line">    criterion = nn.MSELoss()</span><br><span class="line">    loss = criterion(out,target)</span><br><span class="line">   #损失反向传播</span><br><span class="line">    loss.backward()</span><br><span class="line">    print(loss)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    print(&apos;conv1.bias.grad&apos;)</span><br><span class="line">    print(net.conv1.bias.grad)</span><br><span class="line">	#更新权重</span><br><span class="line">    optimizer.step()</span><br></pre></td></tr></table></figure></p>
<p><img src="/2019/03/07/Pytorch中文手册》知识/1.png" alt="bb"><br><img src="/2019/03/07/Pytorch中文手册》知识/2.png" alt="bb"></p>
<h5 id="训练一个分类器"><a href="#训练一个分类器" class="headerlink" title="训练一个分类器"></a>训练一个分类器</h5><h6 id="下载数据集"><a href="#下载数据集" class="headerlink" title="下载数据集"></a>下载数据集</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line">import torchvision</span><br><span class="line">from torchvision.transforms import transforms</span><br><span class="line"></span><br><span class="line">#图像为[0,1]的ＰＩＬ格式　　要转为[-1,1]的tensor形式</span><br><span class="line">transform = transforms.Compose(</span><br><span class="line">    [</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize((0.5,0.5,0.5),(0.5,0.5,0.5))</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trainset = torchvision.datasets.CIFAR10(root=&apos;./data&apos;, train=True,download=True, transform=transform)</span><br><span class="line">trainloader = torch.utils.data.DataLoader(trainset, batch_size=4, shuffle=True, num_workers=2)</span><br><span class="line"></span><br><span class="line">testset = torchvision.datasets.CIFAR10(root=&apos;./data&apos;, train=False, download=True, transform=transform)</span><br><span class="line">testloader = torch.utils.data.DataLoader(trainset, batch_size=4, shuffle=False, num_workers=2)</span><br></pre></td></tr></table></figure>
<h6 id="定义标签"><a href="#定义标签" class="headerlink" title="定义标签"></a>定义标签</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">classes= (&apos;plane&apos;, &apos;car&apos;, &apos;bird&apos;, &apos;cat&apos;, &apos;deer&apos;, &apos;dog&apos;, &apos;frog&apos;, &apos;horse&apos;, &apos;ship&apos;, &apos;truck&apos;)</span><br></pre></td></tr></table></figure>
<h6 id="显示输入图片"><a href="#显示输入图片" class="headerlink" title="显示输入图片"></a>显示输入图片</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def imshow(img):</span><br><span class="line">    img = img /2 +0.5 #[0,1]</span><br><span class="line">    npimg = img.numpy()#tensor转为numpy</span><br><span class="line">    plt.imshow(np.transpose(npimg,(1,2,0)))</span><br></pre></td></tr></table></figure>
<h6 id="迭代读图片"><a href="#迭代读图片" class="headerlink" title="迭代读图片"></a>迭代读图片</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dataiter = iter(trainloader)#创建迭代器</span><br><span class="line">images, label = dataiter.next()</span><br><span class="line"></span><br><span class="line">imshow(torchvision.utils.make_grid(images)) </span><br><span class="line">#torchvision.utils.make_grid(images)将多张图拼在一起</span><br><span class="line">print(&apos;&apos;.join(&apos;%5s&apos; %classes[label[j]] for j in range(4)))</span><br></pre></td></tr></table></figure>
<h6 id="定义网络并实例化"><a href="#定义网络并实例化" class="headerlink" title="定义网络并实例化"></a>定义网络并实例化</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class net(nn.module):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        super(net,self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(3,6,5)</span><br><span class="line">        self.pool = nn.MaxPool2d(2,2)</span><br><span class="line">        self.conv2 = nn.Conv2d(6,16,5)</span><br><span class="line">        self.fc1= nn.Linear(16*5*5, 120)</span><br><span class="line">        self.fc2 = nn.Linear(120,84)</span><br><span class="line">        self.fc3 = nn.Linear(84,10)</span><br><span class="line"></span><br><span class="line">    def forward(self,x):</span><br><span class="line">        x = self.pool(f.relu(self.conv1(x)))</span><br><span class="line">        x = self.pool(f.relu(self.conv2(x)))</span><br><span class="line">        x = x.view(-1,16*5*5)</span><br><span class="line">        x = nn.relu(self.fc1(x))</span><br><span class="line">        x = nn.relu(self.fc2(x))</span><br><span class="line">        x = self.fc3(x)</span><br><span class="line">        return x</span><br><span class="line">net = net()</span><br></pre></td></tr></table></figure>
<h6 id="定义优化器"><a href="#定义优化器" class="headerlink" title="定义优化器"></a>定义优化器</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from torch.optim import optim</span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = optim.SGD(net.parameters(), lr=0.001, momentum=0.9)</span><br></pre></td></tr></table></figure>
<h6 id="训练"><a href="#训练" class="headerlink" title="训练"></a>训练</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">for epoch in range(2):</span><br><span class="line">    running_loss=0.0</span><br><span class="line">    for i, data in enumerate(trainloader, 0):</span><br><span class="line">        inputs, labels = data</span><br><span class="line">        inputs, labels = inputs.to(device), labels.to(device)</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        outputs = net(inputs)</span><br><span class="line">        loss = criterion(outputs,labels)</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">        running_loss +=loss.item()</span><br><span class="line">        if i%2000 == 0:</span><br><span class="line">            print(&apos;[%d,%5d] loss:%3f&apos; %(epoch+1,i+1,running_loss/2000))</span><br><span class="line">        running_loss = 0.0</span><br><span class="line">print(&apos;finish&apos;)</span><br></pre></td></tr></table></figure>
<h6 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dataiter = iter(testloader)</span><br><span class="line">images, labels = dataiter.next()</span><br><span class="line">imshow(torchvision.utils.make_grid(images))</span><br><span class="line">outputs = net(images)</span><br><span class="line">_, predicted = torch.max(outputs,1)</span><br><span class="line">print(&apos;predicted&apos;, &apos;&apos;.join(&apos;%5s&apos; %classes[predicted[j]] for j in range(4)))</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/06/etcode-数组2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shuki">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shu Ki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/06/etcode-数组2/" class="post-title-link" itemprop="url">leetcode-数组2</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-06 17:06:00" itemprop="dateCreated datePublished" datetime="2019-03-06T17:06:00+08:00">2019-03-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-17 22:12:38" itemprop="dateModified" datetime="2019-03-17T22:12:38+08:00">2019-03-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="按奇偶排序数组"><a href="#按奇偶排序数组" class="headerlink" title="按奇偶排序数组"></a>按奇偶排序数组</h5><p>给定一个非负整数数组 A，返回一个由 A 的所有偶数元素组成的数组，后面跟 A 的所有奇数元素。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def sortArrayByParity(self, A):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        k = 0</span><br><span class="line">        for i in range(len(A)):</span><br><span class="line">            if A[i]%2==0:</span><br><span class="line">                A[k],A[i] =A[i],A[k]</span><br><span class="line">                k+=1</span><br><span class="line">        return A</span><br></pre></td></tr></table></figure></p>
<h6 id="有效的山脉数组"><a href="#有效的山脉数组" class="headerlink" title="有效的山脉数组"></a>有效的山脉数组</h6><p>给定一个整数数组 A，如果它是有效的山脉数组就返回 true，否则返回 false。<br><br>如果 A 满足下述条件，那么它是一个山脉数组：A.length &gt;= 3<br>在 0 &lt; i &lt; A.length - 1 条件下，存在 i 使得：<br><br><code>A[0] &lt; A[1] &lt; ... A[i-1] &lt; A[i]</code><br><br><code>A[i] &gt; A[i+1] &gt; ... &gt; A[B.length - 1]</code><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def validMountainArray(self, A):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        l=len(A)</span><br><span class="line">        if l&lt;3:</span><br><span class="line">            return False</span><br><span class="line">        index = A.index(max(A)) #找到数组的最大值的索引值</span><br><span class="line">        if index==Len-1:</span><br><span class="line">            return False</span><br><span class="line">        if index==0:</span><br><span class="line">            return False #如果最大值位于首位和尾部，不是山脉数组</span><br><span class="line">        for ii in range(index):</span><br><span class="line">            if A[ii]&gt;=A[ii+1]:</span><br><span class="line">                return False #如果在递增的区域发现有大于存在 则为FALSE</span><br><span class="line">        for ii in range(index, Len-1):</span><br><span class="line">            if A[ii]&lt;=A[ii+1]:</span><br><span class="line">                return False  #如果在递减的区域发现有小于存在 则为FALSE</span><br><span class="line">        return True</span><br></pre></td></tr></table></figure></p>
<h6 id="有序数组的平方"><a href="#有序数组的平方" class="headerlink" title="有序数组的平方"></a>有序数组的平方</h6><p>给定一个按非递减顺序排序的整数数组 A，返回每个数字的平方组成的新数组，要求也按非递减顺序排序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def sortedSquares(self, A):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        i, j = 0, len(A)-1</span><br><span class="line">        ans = [0]*len(A)</span><br><span class="line">        for k in range(len(A)-1,-1,-1):</span><br><span class="line">        	if abs(A[i]) &lt; abs(A[j]):</span><br><span class="line">            ans[k] = A[j]**2</span><br><span class="line">            j = j-1</span><br><span class="line">			  else:</span><br><span class="line">             ans[k] = A[i]**2</span><br><span class="line">             i = i+1</span><br><span class="line">        return ans</span><br></pre></td></tr></table></figure></p>
<h5 id="查询后的偶数和"><a href="#查询后的偶数和" class="headerlink" title="查询后的偶数和"></a>查询后的偶数和</h5><p>给出一个整数数组 A 和一个查询数组 queries。</p>
<p>对于第 i 次查询，有 <code>val = queries[i][0]   index = queries[i][1]</code>我们会把 val 加到 <code>A[index]</code> 上。然后，第 i 次查询的答案是 A 中偶数值的和。</p>
<p>（此处给定的 <code>index = queries[i][1]</code> 是从 0 开始的索引，每次查询都会永久修改数组 A。）</p>
<p>返回所有查询的答案。你的答案应当以数组 answer 给出<code>answer[i]</code> 为第 i 次查询的答案。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def sumEvenAfterQueries(self, A, queries):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :type queries: List[List[int]]</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        ans = []</span><br><span class="line">        for i in range(len(queries)):</span><br><span class="line">            A[queries[i][1]] = A[queries[i][1]] + queries[i][0]</span><br><span class="line">            sum_ = 0</span><br><span class="line">            for j in range(len(A)):</span><br><span class="line">                if A[j]%2==0:</span><br><span class="line">                    sum_ +=A[j]</span><br><span class="line">            ans.append(sum_)</span><br><span class="line">        return ans</span><br></pre></td></tr></table></figure>
<p><strong>直接按题意来会超时</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def sumEvenAfterQueries(self, A, queries):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :type queries: List[List[int]]</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        #先sum一下数组里所有的偶数元素，把这个值设为base_sum的初始值</span><br><span class="line">        base_sum = sum(item for item in A if item%2==0)</span><br><span class="line">        result = []</span><br><span class="line">        </span><br><span class="line">        for item in queries:</span><br><span class="line">            value = item[0]</span><br><span class="line">            index = item[1]</span><br><span class="line">            newvalue = A[index] + value</span><br><span class="line">            # 如果查询之前是偶数，查询之后变成了偶数，就需要加上value</span><br><span class="line">            if not A[index] % 2 and not newvalue % 2: # even and even</span><br><span class="line">                   base_sum += value</span><br><span class="line">            # 如果查询之前是偶数，查询之后变成了奇数，就需要减去之前的</span><br><span class="line">            elif not A[index] % 2 and newvalue % 2:  # even and odd</span><br><span class="line">                   base_sum -= A[index] </span><br><span class="line">            # 如果查询之前是奇数，查询之后变成了偶数，就需要加newvalue</span><br><span class="line">            elif A[index] % 2 and not newvalue % 2:  # odd and even</span><br><span class="line">                   base_sum += newvalue</span><br><span class="line">       		  result.append(sumOfEven)            </span><br><span class="line">            A[index] = newvalue</span><br><span class="line">        return result</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/03/论文阅读——关于边缘作为条件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shuki">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shu Ki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/03/论文阅读——关于边缘作为条件/" class="post-title-link" itemprop="url">论文阅读——关于边缘作为网络条件</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-03 08:58:00 / 修改时间：10:06:56" itemprop="dateCreated datePublished" datetime="2019-03-03T08:58:00+08:00">2019-03-03</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/深度学习/" itemprop="url" rel="index"><span itemprop="name">深度学习</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>目前提出的网络都是带有条件的网络，也可以称之为带有先验的网络，比较常见的条件有label，语义图，mask，人脸关键点和人体姿态估计点。有些是原本就存在的条件，有些则需要某种方法去获取。文章分析将边缘作为一个条件/先验，用于本征分解的指导和图像修复的结构先验。</p>
<h5 id="Revisiting-Deep-Intrinsic-Image-Decompositions"><a href="#Revisiting-Deep-Intrinsic-Image-Decompositions" class="headerlink" title="Revisiting Deep Intrinsic Image Decompositions"></a><strong>Revisiting Deep Intrinsic Image Decompositions</strong></h5><p>这是17年出的一篇论文。</p>
<p>先将图片放入直接本征分解的网络中，得到粗略的albedo图像和shading图像。同时，将输入图像和其边缘图一起放进一个指导网络中，输出一个指导特征。利用特征指导和粗略的albedo图像经过Domain Filter得到细化的albedo图像，最后利用原图得到细化的shading图像。</p>
<p>论文主要有两个网络：粗略的本征分解网络和边缘特征指导网络。下图是网络框架：</p>
<p><img src="/2019/03/03/论文阅读——关于边缘作为条件/img-1.jpg" alt="aa"></p>
<p>然后再利用传统的算法去细化albedo图像。因为本征分解的一个难点就是图像边缘处理不是很好。本文用边缘图作为一种特征指导，可以改善albedo图像的边缘。</p>
<p><strong>其实还可以用到估计深度图，生成的深度图也是不同深度物体之间的边缘比较模糊。</strong></p>
<h5 id="EdgeConnect-Generative-Image-Inpainting-with-Adversarial-Edge-Learning"><a href="#EdgeConnect-Generative-Image-Inpainting-with-Adversarial-Edge-Learning" class="headerlink" title="EdgeConnect: Generative Image Inpainting with Adversarial Edge Learning"></a><strong>EdgeConnect: Generative Image Inpainting with Adversarial Edge Learning</strong></h5><p>这是19年刚出的一篇论文。GitHub：<a href="https://github.com/knazeri/edge-connect" target="_blank" rel="noopener">https://github.com/knazeri/edge-connect</a></p>
<p><img src="/2019/03/03/论文阅读——关于边缘作为条件/img-2.JPG" alt="bb"><br><strong>边缘生成网络G1：</strong>它先利用candy算子提取图像边缘，再将源图像灰度处理后与边缘图像一起进行mask处理。得到的Mask+Edge+Grayscale作为网络的输入。训练时真实的边缘图作为监督。该网络的用处是补全丢失掉的边缘信息，解决了以前图像修补缺少结构信息的问题。</p>
<p><strong>补全网络G2：</strong>将G1输出的补全边缘图作为条件，和待修补的图像一起送进GAN网络得到补全图像。</p>
<p><strong>论文的亮点就是创建了边缘生成网络。还有就是如下图所示，论文提到的将两个图像的边缘图融合在一起生成新的图像，也是一个图像合成的新点子</strong><br><img src="/2019/03/03/论文阅读——关于边缘作为条件/img-3.JPG" alt="cc"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/02/hexo发文测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shuki">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shu Ki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/02/hexo发文测试/" class="post-title-link" itemprop="url">leetcode-数组1</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-02 15:15:00" itemprop="dateCreated datePublished" datetime="2019-03-02T15:15:00+08:00">2019-03-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-04 16:28:43" itemprop="dateModified" datetime="2019-03-04T16:28:43+08:00">2019-03-04</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/leetcode题目/" itemprop="url" rel="index"><span itemprop="name">leetcode题目</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="–-到最近的人的最大距离"><a href="#–-到最近的人的最大距离" class="headerlink" title=" –  到最近的人的最大距离"></a><strong> –  到最近的人的最大距离</strong></h4><p>方法一：从左到右遍历找0和1的差值，只考虑右边的差。<br>      从右到左遍历找0和1的差值，并与上一步的值进行比较，小的就是最近的人。<br>      在最近的人数组中找到距离max</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):                                                                 </span><br><span class="line">	def maxDistToClosest(self, seats):</span><br><span class="line">		ans = [0]*len(seats)</span><br><span class="line">		for i in range(len(seats)):</span><br><span class="line">			if seats[i]==1:</span><br><span class="line">				index = i</span><br><span class="line">			else:</span><br><span class="line">				ans[i] = abs(i-index)</span><br><span class="line">				for i in range(len(seats)-1,-1,-1):</span><br><span class="line">					if seats[i]==1:</span><br><span class="line">						index = i</span><br><span class="line">					else:</span><br><span class="line">						ans[i] = min( abs(i-index), ans[i])</span><br><span class="line">			return max(ans)</span><br></pre></td></tr></table></figure>
<p>  方法二：找到连续0的个数，考虑两个1中间的0 和首尾的0  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):                                                                 </span><br><span class="line">    def maxDistToClosest(self, seats):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type seats: List[int]</span><br><span class="line">        :rtype: int</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        count = 0</span><br><span class="line">        ans = []</span><br><span class="line">        for i in seats:</span><br><span class="line">            if i==0:</span><br><span class="line">                count+=1</span><br><span class="line">            else:</span><br><span class="line">                ans.append(count)</span><br><span class="line">                count=0 </span><br><span class="line">        ans.append(count)</span><br><span class="line">        max_1 = max(ans)</span><br><span class="line">        if max_1%2 == 0:</span><br><span class="line">            max_1 =  max_1 / 2  </span><br><span class="line">        else:</span><br><span class="line">            max_1 =  max_1 / 2 +1</span><br><span class="line">        return max(max_1,ans[0], ans[-1])</span><br></pre></td></tr></table></figure>
<h6 id="第二种方法在内存和耗时上效果更好。"><a href="#第二种方法在内存和耗时上效果更好。" class="headerlink" title="第二种方法在内存和耗时上效果更好。"></a>第二种方法在内存和耗时上效果更好。</h6><h4 id="–-转置矩阵"><a href="#–-转置矩阵" class="headerlink" title="–  转置矩阵"></a><strong>–  转置矩阵</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def transpose(self, A):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[List[int]]</span><br><span class="line">        :rtype: List[List[int]]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        n=len(A)</span><br><span class="line">        m = len(A[0])</span><br><span class="line">        B=[[0]*n for k in range(m)]</span><br><span class="line">        for i in range(n):</span><br><span class="line">            for j in range(m):</span><br><span class="line">                B[j][i] = A[i][j]</span><br><span class="line">        return B</span><br></pre></td></tr></table></figure>
<h4 id="–-公平的糖果交换"><a href="#–-公平的糖果交换" class="headerlink" title="–  公平的糖果交换"></a><strong>–  公平的糖果交换</strong></h4><p>A[i] 是爱丽丝拥有的第 i 块糖的大小，B[j] 是鲍勃拥有的第 j 块糖的大小。</p>
<p>因为他们是朋友，所以他们想交换一个糖果棒，这样交换后，他们都有相同的糖果总量。</p>
<p>返回一个整数数组 ans，其中 ans[0] 是爱丽丝必须交换的糖果棒的大小，ans[1] 是 Bob 必须交换的糖果棒的大小。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def fairCandySwap(self, A, B):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :type B: List[int]</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        sum1=sum(A)</span><br><span class="line">        sum2=sum(B)</span><br><span class="line">        c = set(B)</span><br><span class="line">        d = (sum1-sum2)//2</span><br><span class="line">        for i in A:</span><br><span class="line">            if i-d in c:</span><br><span class="line">                return[i,i-d]</span><br></pre></td></tr></table></figure></p>
<h6 id="尽量循环里少计算"><a href="#尽量循环里少计算" class="headerlink" title="尽量循环里少计算"></a>尽量循环里少计算</h6><h4 id="–-单调数列"><a href="#–-单调数列" class="headerlink" title="–  单调数列"></a><strong>–  单调数列</strong></h4><p>如果数组是单调递增或单调递减的，那么它是单调的。</p>
<p>如果对于所有 i &lt;= j，A[i] &lt;= A[j]，那么数组 A 是单调递增的。 如果对于所有 i &lt;= j，A[i]&gt; = A[j]，那么数组 A 是单调递减的。</p>
<p>当给定的数组 A 是单调数组时返回 true，否则返回 false。</p>
<h6 id="我的思路是对单调的元素个数计数。耗时较大。"><a href="#我的思路是对单调的元素个数计数。耗时较大。" class="headerlink" title="我的思路是对单调的元素个数计数。耗时较大。"></a>我的思路是对单调的元素个数计数。耗时较大。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def isMonotonic(self, A):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        count1 = 0</span><br><span class="line">        count2 = 0</span><br><span class="line">        for i in range(1,len(A)):</span><br><span class="line">            if A[i]&lt;=A[i-1]:</span><br><span class="line">                count1+=1</span><br><span class="line">            if A[i]&gt;=A[i-1]:</span><br><span class="line">                count2+=1</span><br><span class="line">        if count1==len(A)-1 or count2==len(A)-1:</span><br><span class="line">            return bool(1)</span><br><span class="line">        else:</span><br><span class="line">            return bool(0)</span><br></pre></td></tr></table></figure>
<h6 id="先根据第一个和最后一个定单调减还是单调加。"><a href="#先根据第一个和最后一个定单调减还是单调加。" class="headerlink" title="先根据第一个和最后一个定单调减还是单调加。"></a>先根据第一个和最后一个定单调减还是单调加。</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def isMonotonic(self, A):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type A: List[int]</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        flag = A[-1] - A[0] # 定基调</span><br><span class="line">        #如果是加 ，for循环查看中间是否有小于的</span><br><span class="line">        if flag &gt; 0: </span><br><span class="line">            for i in range(len(A) - 1):</span><br><span class="line">                if A[i + 1] - A[i] &lt; 0:</span><br><span class="line">                    return False</span><br><span class="line">        #如果是减 ，for循环查看中间是否所有有大于的</span><br><span class="line">        else:</span><br><span class="line">            for i in range(len(A) - 1):</span><br><span class="line">                if A[i + 1] - A[i] &gt; 0:</span><br><span class="line">                    return False</span><br><span class="line">        return True</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/02/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shuki">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shu Ki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/02/hello-world/" class="post-title-link" itemprop="url">Hello hexo</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-02 15:07:00 / 修改时间：16:11:40" itemprop="dateCreated datePublished" datetime="2019-03-02T15:07:00+08:00">2019-03-02</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>开启我的hexo博客之旅~~~</p>
<h3 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h3><h4 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h4 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h4 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h4 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/1.jpg" alt="Shuki">
            
              <p class="site-author-name" itemprop="name">Shuki</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                LINK
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.vikeezan.club" title="http://www.vikeezan.club" rel="noopener" target="_blank">vikeezan</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.vmip.com.cn" title="http://www.vmip.com.cn" rel="noopener" target="_blank">VMIP</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.rayshell.work" title="http://www.rayshell.work" rel="noopener" target="_blank">rayshell</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shuki</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.0.1</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  

  


  <script src="/js/src/bootstrap.js?v=7.0.1"></script>


  
  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
</body>
</html>
